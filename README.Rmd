---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# NRV

<!-- badges: start -->
<!-- badges: end -->

The goal of NRV is to help government personnel and consultants calculate baseline values for water quality parameters using the Natural Range of Variation (NRV) method developed by the Northwest Territories Cumulative Impact Monitoring Program (NWT CIMP). This NRV method calculates the lower and upper thresholds for individual water quality parameters using either the Tukey Inner Fence (TIF) method for parameters with ≤10% outlier and ≤77% results below the detection limit, or the Median±2MAD methods for parameters with ≤50% outlier and ≤50% results below the detection limit. 

The NRV package provides a the NRV function that reads in a data frame with water quality results for one or more sites and produces a table with the NRV thresholds and associated summary statistics, and boxplots for each water quality parameter and site. 

The NRV function requires the CCME table (found on git) to render the guidelines on each boxplot. Many CCME guidelines change based on site-specific water quality, such as hardness, so you must manually edit the CCME table. 

The NRV function requires you to format your data frame with specific column names. Please refer to the example data frame to see how to format yours. The function NRV_summ_df allows you to read in your data frame and identifty the matching columns and then produce a data frame that will work with the NRV function. 

The NRV function allows you to read in a single data frame with all site results, or individual data frames for each site. 

## Installation

You can install the released version of NRV from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("NRV")
```

## Example

Preparing your data frame with NRV_summ_df

```{r example}
library(NRV)
WC<-NRV_summ_df(WC$SiteID,WC$Date,WC$Variable,WC$Fraction,WC$'Detection Limit',WC$Detection,WC$Value)
```

What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r NRV}
NRV(list(WCTL))
```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/master/examples>.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub and CRAN.
